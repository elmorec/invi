!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Invi={})}(this,function(t){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function e(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function a(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase();return e.match(/element$/)?"element":e}function l(t,e){return Array.prototype.forEach.call(t,e)}function h(t,e){var n=r({},t);if("object"!==a(e))return n;for(var i in e){var s=t[i],o=e[i],c=a(s);null!=s?c===a(o)&&(n[i]="object"===c?h(s,o):o):n[i]=o}return n}function u(t){return t.charAt(0).toUpperCase()+t.substring(1)}var n=function(){function t(){this.events={}}return t.prototype.on=function(t,e){(this.events[t]||(this.events[t]=[])).push(e)},t.prototype.off=function(t,e){this.events[t]&&this.events[t].splice(this.events[t].indexOf(e)>>>0,1)},t.prototype.removeAllListeners=function(){this.events={}},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];(this.events[t]||[]).slice().map(function(t){t.apply(void 0,e)})},t}();function o(t,e,n){void 0===n&&(n=document.body);for(var i,s,o,c=[],r=(i=n.querySelectorAll(e),s=function(t){return t},Array.prototype.map.call(i,s));t&&!~r.indexOf(t);)t=t!==n&&!(null!=(o=t)&&o.nodeType==o.DOCUMENT_NODE)&&t.parentNode;return t&&c.indexOf(t)<0&&c.push(t),c}function c(t,n,i){var s=this;s.addEventListener(t,function(t){var e=o(t.target,n,s)[0];e&&i(e,t)})}function f(t,e,n,i){void 0===i&&(i={passive:!0});var s=function(){n(),t.removeEventListener(e,s,i)};t.addEventListener(e,s,i)}function d(t,e){for(var n in e)t.style[n]=e[n]}var p={};function v(t,e){if(t in document.body.style)return t;if(p[t])return p[t][e?1:0];for(var n,i=u(t),s=["webkit","Moz","O","ms"],o=0;o<s.length;o++){var c=s[o]+i;if(c in document.body.style)return p[t]=[c,(n=u(c),n.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}))],p[t][e?1:0]}}var s,m,y="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,g=function(){var t={animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend"};for(var e in t)if(e in document.body.style)return t[e]}(),b=function(){var t={transition:"transitionend",webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionEnd"};for(var e in t)if(e in document.body.style)return t[e]}(),x="expand",E="collapse",L={selectors:{title:"header",content:"article"},classes:{},event:"click",indexes:[-1],accordion:!1,animation:!0},O=function(i){function s(t,e){void 0===e&&(e={});var n=i.call(this)||this;return n.items=[],n.config=s.config(e,!0),n.host=t,n.refresh(!0),c.bind(t)(n.config.event,n.config.selectors.title,function(t){n.toggle(n.items.map(function(t){return t.title}).indexOf(t))}),n}return e(s,i),s.config=function(t,e){var n=h(L,t);if(b||(n.animation=!1),e)return n;L=n},s.prototype.toggle=function(t){var e=this.items[t];return e?this[e.active?"collapse":"expand"](t):Promise.reject()},s.prototype.collapse=function(t,e){var n=this,i=this.items[t],s=this.config.classes;return i?!i.active||i.busy?Promise.resolve({title:i.title,content:i.content,index:t}):(i.active=!1,s.titleActive&&i.title.classList.remove(s.titleActive),s.contentActive&&i.content.classList.remove(s.contentActive),e?void(i.content.style.display="none"):(i.busy=!0,new Promise(function(t){n.config.animation?(i.content.style.maxHeight=i.contentHeight+"px",setTimeout(function(){i.content.style.maxHeight=i.content.style.paddingTop=i.content.style.paddingBottom="0"},24),f(i.content,b,function(){i.content.style.display="none",i.content.style.maxHeight=i.content.style.paddingTop=i.content.style.paddingBottom="",setTimeout(t,24)})):(i.content.style.display="none",t())}).then(function(){return i.busy=!1,n.emit(E,i.content,t),{title:i.title,content:i.content,index:t}}))):Promise.reject()},s.prototype.expand=function(n,t){var i=this,e=this.items[n],s=this.config.classes;return e?e.active||e.busy?Promise.resolve({title:e.title,content:e.content,index:n}):(e.active=!0,s.titleActive&&e.title.classList.add(s.titleActive),s.contentActive&&e.content.classList.add(s.contentActive),t?(e.content.style.display="",void(this.config.accordion&&this.items.forEach(function(t,e){return n!==e&&i.collapse(e,!0)}))):(e.busy=!0,Promise.all([new Promise(function(t){i.config.animation?(e.content.style.maxHeight=e.content.style.paddingTop=e.content.style.paddingBottom="0",e.content.style.display="",setTimeout(function(){e.content.style.maxHeight=e.contentHeight+"px",e.content.style.paddingTop=e.content.style.paddingBottom=""},24),f(e.content,b,function(){e.content.style.maxHeight=e.content.style.paddingTop=e.content.style.paddingBottom="",setTimeout(t,24)})):(e.content.style.display="",t())}).then(function(){e.busy=!1,i.emit(x,e.content,n)})].concat(this.config.accordion?this.items.map(function(t,e){return n!==e?i.collapse(e):void 0}):void 0)).then(function(){return{title:e.title,content:e.content,index:n}}))):Promise.reject()},s.prototype.refresh=function(t){var s=this,e=this.host.querySelectorAll(this.config.selectors.title),o=this.host.querySelectorAll(this.config.selectors.content),c=[];l(e,function(t,e){var n=o[e];if(n){var i={title:t,content:n,active:!0,busy:!1};s.config.animation&&(i.contentHeight=n.offsetHeight),c.push(i)}}),this.items=c,t&&c.map(function(t,e){return s[~s.config.indexes.indexOf(e)?"expand":"collapse"](e,!0)})},s.prototype.destroy=function(){this.removeAllListeners(),this.host=this.items=this.config=null},s}(n),P={content:"",animation:!0,duration:1e3,unsafe:!1,host:document.body},w=function(t){return void 0===t&&(t={}),n=h(P,"object"===a(t)?t:{content:String(t)}),i=document.createElement("div"),s=n.classes||{},i[n.unsafe?"innerHTML":"innerText"]=n.content,s.host&&(i.className=s.host),n.host.appendChild(i),new Promise(function(t){function e(){setTimeout(function(){return t()},n.duration)}s.enter&&n.animation?(i.classList.add(s.enter),f(i,g,function(){i.classList.remove(s.enter),e()})):e()}).then(function(){if(s.leave&&n.animation)return new Promise(function(t){i.classList.add(s.leave),f(i,g,function(){i.classList.remove(s.leave),e(),t()})});function e(){n.host.removeChild(i),i=null}e()});var n,i,s};w.config=function(t){P=h(P,t),g||(P.animation=!1)},(m=s||(s={}))[m.OPENED=0]="OPENED",m[m.CLOSED=1]="CLOSED",m[m.OPENING=2]="OPENING",m[m.CLOSING=3]="CLOSING";var A="open",C="close",T="cancel",N="confirm",z={host:document.body,title:"",content:"",animation:!0,event:"click",autoclose:!0,actions:[]},S=function(n){function i(t){var e=n.call(this)||this;return e.state=s.CLOSED,e.el={},e.config=i.config(t,!0),e.render(),c.bind(e.host)(e.config.event,"[data-action]",function(t){switch(t.dataset.action){case C:e.close();break;case T:e.emit(T),e.close();break;case N:e.emit(N),e.close()}}),e}return e(i,n),i.config=function(t,e){var n=h(z,t);if(g||(n.animation=!1),e)return n;z=n},i.prototype.render=function(){var n,i=this,s=this.config,t=s.classes||{},e=document.createElement("div"),o=document.createElement("div"),c=document.createElement("div"),r=document.createElement("article");if(t.host&&(e.className=t.host),t.backdrop&&(o.className=t.backdrop),t.body&&(c.className=t.body),s.title){var a=document.createElement("header");a.innerHTML=s.title,c.appendChild(a),this.el.header=a}s.autoclose&&(o.dataset.action=C),r.innerHTML=s.content,s.actions&&s.actions.length&&(n=document.createElement("footer"),s.actions.forEach(function(t){var e=document.createElement("a");e.innerHTML=t.label,t.class&&(e.className=t.class),t.type&&(e.dataset.action=t.type),t.redirect&&(e.href=t.redirect),t.target&&(e.target=t.target),t.callback&&e.addEventListener(s.event,t.callback.bind(i)),n.appendChild(e)})),c.appendChild(r),n&&(c.appendChild(n),this.el.footer=n),e.appendChild(o),e.appendChild(c),this.host=e,this.el.body=c,this.el.content=r},i.prototype.setOverflow=function(t){this.config.host.style.overflow=t?"hidden":""},i.prototype.open=function(){var e=this;return this.state===s.OPENING||this.state===s.OPENED?Promise.reject():(this.setOverflow(!0),this.config.classes.enter&&this.config.animation?new Promise(function(t){e.host.classList.add(e.config.classes.enter),f(e.host,g,function(){e.host.classList.remove(e.config.classes.enter),e.state=s.OPENED,e.emit(A),t(e)}),e.state=s.OPENING,e.config.host.appendChild(e.host)}):(this.config.host.appendChild(this.host),this.state=s.OPENED,this.emit(A),Promise.resolve()))},i.prototype.close=function(){var e=this;return this.state===s.CLOSING||this.state===s.CLOSED?Promise.reject():(this.setOverflow(),this.config.classes.leave&&this.config.animation?new Promise(function(t){f(e.host,g,function(){e.config.host.removeChild(e.host),e.host.classList.remove(e.config.classes.leave),e.state=s.CLOSED,e.emit(C),t(e)}),e.state=s.CLOSING,e.host.classList.add(e.config.classes.leave)}):(this.config.host.removeChild(this.host),this.state=s.CLOSED,this.emit(C),Promise.resolve()))},i.prototype.destroy=function(){this.removeAllListeners(),this.host=this.el=this.config=null},i}(n),j="switch",M={selectors:{tab:"a",content:"article"},classes:{},event:"click",index:0},k=function(i){function s(t,e){void 0===e&&(e={});var n=i.call(this)||this;return n.current=0,n.tabs=[],n.contents=[],n.config=s.config(e,!0),n.host=t,n.config.index&&(n.current=n.config.index),n.refresh(),c.bind(t)(n.config.event,n.config.selectors.tab,function(t){var e=n.tabs.indexOf(t);~e&&n.switch(e)}),n}return e(s,i),s.config=function(t,e){var n=h(M,t);if(e)return n;M=n},s.prototype.switch=function(e,t){var n=this;if((e!==this.current||t)&&this.tabs[e]){var i=this.current,s=this.config.classes,o=this.tabs[i],c=this.contents[i],r=this.tabs[e],a=this.contents[e];return s.active&&(o.classList.remove(s.active),r.classList.add(s.active)),c.style.display="none",a.style.display="",this.current=e,new Promise(function(t){setTimeout(function(){n.emit(j,r,a,e,i),t({tab:r,content:a,current:e,previous:i})},0)})}},s.prototype.refresh=function(){var i=this,t=this.host.querySelectorAll(this.config.selectors.tab),s=this.host.querySelectorAll(this.config.selectors.content);l(t,function(t,e){var n=s[e];n&&(n.style.display="none",i.tabs.push(t),i.contents.push(n))}),this.switch(this.current,!0)},s.prototype.destroy=function(){this.removeAllListeners(),this.host=this.tabs=this.contents=this.config=null},s}(n),D=r({slide:"slide",slideChange:"slideChange"},y?{start:"touchstart",move:"touchmove",end:["touchend"]}:{start:"mousedown",move:"mousemove",end:["mouseup","mouseleave"]}),H={selectors:{item:"li"},delay:4e3,speed:500,continuous:!1,auto:!1,index:0,threshold:.4,resistance:.4,classes:{}},_=function(s){function o(t,e){void 0===e&&(e={});var n=s.call(this)||this;if(n.items=[],n.current=0,n.config=o.config(e,!0),n.host=t,n.config.selectors.indicator){var i=document.querySelectorAll(n.config.selectors.indicator);i&&(n.indicators=i)}return n.setup(),n.offEvents=n.setupEvents(),n.config.auto&&n.start(),n}return e(o,s),o.config=function(t,e){var n=h(H,t);if(n.auto&&(n.continuous=!0),(n.threshold<0||1<n.threshold)&&(n.threshold=H.threshold),(n.resistance<0||1<n.resistance)&&(n.resistance=H.resistance),b||(n.speed=0),n.selectors.indicator&&n.classes.indicatorActive||(delete n.selectors.indicator,delete n.classes.indicatorActive),n.resistance=1-n.resistance,e)return n;H=n},o.prototype.setup=function(){var t=this.host.querySelector(this.config.selectors.item).parentElement,n=[],i=t.offsetWidth;l(t.children,function(t,e){d(t,{width:i+"px",cssFloat:"left"}),n.push({el:t,index:e})}),d(t,{overflow:"hidden",width:i*n.length+"px"}),this.container=t,this.items=n,this.size=n.length,this.step=i,this.move(this.config.index,0)},o.prototype.setupEvents=function(){var s=this,o={x:0,y:0},c={x:0,y:0},n=s.config.continuous&&2<s.size,i={map:{},handleEvent:function(t){if(!s.busy){var e=this[this.map[t.type]];e&&e(t)}},start:function(t){var e=y?t.touches[0]:t;o.x=e.pageX,o.y=e.pageY,s.config.auto&&s.stop.call(s),a.apply(void 0,[D.move].concat(D.end))},move:function(t){if(!(t.touches&&1<t.touches.length)){var e=y?t.touches[0]:t;if(c.x=e.pageX-o.x,c.y=e.pageY-o.y,Math.abs(c.x)>=Math.abs(c.y)){var n=s.step-1,i=c.x*s.config.resistance;n<i?i=n:i<-n&&(i=-n),s.translate(s.current*s.step-i,0)}}},end:function(){var t=s.step*s.config.threshold,e=Math.ceil(s.config.speed/s.step*Math.abs(c.x));l.apply(void 0,[D.move].concat(D.end)),c.x>t?n||0<s.current?s.prev().then(function(){s.config.auto&&s.start.call(s)}):s.translate(s.current*s.step,e):c.x<-t&&(n||s.current<s.size-1)?s.next().then(function(){s.config.auto&&s.start.call(s)}):s.translate(s.current*s.step,e)}},r={passive:!1},t=function(e){var t=D[e];"string"==typeof t?i.map[t]=e:t.forEach(function(t){return i.map[t]=e})};for(var e in D)t(e);return a(D.start),function(){l.apply(void 0,[D.start,D.move].concat(D.end))};function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return s.container.addEventListener(t,i,r)})}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return s.container.removeEventListener(t,i,r)})}},o.prototype.translate=function(t,e){var n,i="translateX("+~~-t+"px)",s=e+"ms";d(this.container,((n={})[v("transform")]=i,n[v("transitionDuration")]=s,n))},o.prototype.move=function(n,t){var e=this;if(this.busy||n<0||n>this.size-1)return Promise.resolve(!1);var i,s=this.current===n&&0===n?0:this.items[this.current].index,o=this.config.continuous&&2<this.size,c=this.config.classes;this.busy=!0,c.active&&this.items[this.current].el.classList.remove(c.active),i=o?0===n?(this.items.unshift(this.items.pop()),1):n===this.size-1?(this.items.push(this.items.shift()),this.size-2):n:n;var r=this.items[i].index;return this.indicators&&(this.indicators[s]&&this.indicators[s].classList.remove(this.config.classes.indicatorActive),this.indicators[r]&&this.indicators[r].classList.add(this.config.classes.indicatorActive)),setTimeout(function(){e.emit(D.slide,s,r)},0),this.translate(n*this.step,t),0<t?new Promise(function(t){f(e.container,b,function(){a.call(e,function(){t(!0)})})}):a.call(this);function a(t){var e=this;c.active&&this.items[i].el.classList.add(c.active),o&&(0===n?(this.container.insertBefore(this.container.children[this.size-1],this.container.children[0]),this.translate(this.step,0)):n===this.size-1&&(this.container.appendChild(this.container.children[0]),this.translate(this.step*(n-1),0))),this.current=i,this.busy=!1,setTimeout(function(){e.emit(D.slideChange,e.items[i].index,s),t&&t()},0)}},o.prototype.slide=function(t){if(t<0||t>this.size-1||this.busy)return Promise.resolve(!1);for(var e=0;e<this.size;){if(this.items[e].index===t)return this.move(e,this.config.speed);e++}},o.prototype.next=function(){return this.move(this.size<3&&this.current===this.size-1?0:this.current+1,this.config.speed)},o.prototype.prev=function(){return this.move(this.size<3&&0===this.current?this.size-1:this.current-1,this.config.speed)},o.prototype.start=function(){var t=this;if(!(this.running||this.size<3)){this.stop(),this.running=!0;var e=function(){t.running&&(t.instance=setTimeout(function(){t.next().then(e)},t.config.delay))};e()}},o.prototype.stop=function(){clearInterval(this.instance),this.instance=null,this.running=!1},o.prototype.destroy=function(){this.offEvents(),this.removeAllListeners(),this.stop(),this.host=this.items=this.container=null},o}(n);t.Collapsible=O,t.toast=w,t.Modal=S,t.Tab=k,t.Carousel=_,Object.defineProperty(t,"__esModule",{value:!0})});
