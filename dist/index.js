!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Invi={})}(this,function(t){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function e(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function c(t){var e={}.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase();return e.match(/element$/)?"element":e}function h(t,e){return[].forEach.call(t,e)}function u(t,e){var n=a({},t);if("object"!==c(e))return n;for(var i in e){var s=t[i],o=e[i],r=c(s);null!=s?r===c(o)&&(n[i]="object"===r?u(s,o):o):n[i]=o}return n}function l(t){return t.charAt(0).toUpperCase()+t.substring(1)}function f(t){t.offsetHeight<0&&alert()}function d(e,t){var n={};return t.forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n}var n=(s.prototype.on=function(t,e){(this._events[t]||(this._events[t]=[])).push(e)},s.prototype.off=function(t,e){this._events[t]&&this._events[t].splice(this._events[t].indexOf(e)>>>0,1)},s.prototype.removeAllListeners=function(){this._events={}},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];(this._events[t]||[]).slice().map(function(t){t.apply(void 0,e)})},s);function s(){this._events={}}function o(t,n,i){function e(t){var e=function(t,e,n){void 0===n&&(n=document.body);for(var i,s=[],o=function(t,e){return[].map.call(t,e)}(n.querySelectorAll(e),function(t){return t});t&&!~o.indexOf(t);)t=t!==n&&!(null!=(i=t)&&i.nodeType==i.DOCUMENT_NODE)&&t.parentNode;return t&&s.indexOf(t)<0&&s.push(t),s}(t.target,n,s)[0];e&&i(e,t)}var s=this;return s.addEventListener(t,e),function(){s.removeEventListener(t,e)}}function p(t,e,n,i){void 0===i&&(i={passive:!0});var s=function(){n(),t.removeEventListener(e,s,i)};t.addEventListener(e,s,i)}function v(t,e){for(var n in e)t.style[n]=e[n]}var m={};function g(t,e){if(t in document.body.style)return t;if(m[t])return m[t][e?1:0];for(var n,i=l(t),s=["webkit","Moz","O","ms"],o=0;o<s.length;o++){var r=s[o]+i;if(r in document.body.style)return m[t]=[r,(n=l(r),n.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}))],m[t][e?1:0]}}var r,y="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,x=function(){var t={animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend"};for(var e in t)if(e in document.body.style)return t[e]}(),_=function(){var t={transition:"transitionend",webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionEnd"};for(var e in t)if(e in document.body.style)return t[e]}(),b="expand",E="collapse",L={selectors:{title:"header",content:"article"},classes:{},event:"click",accordion:!1,animation:!0,duration:300},O=(e(A,r=n),A.config=function(t,e){var n=u(L,t);if(Array.isArray(n.index)||(n.index=[n.index]),n.index=n.index.filter(function(t){return"number"==typeof t}),_||(n.animation=!1),1<n.duration||(n.duration=L.duration),e)return n;L=n},A.prototype.toggle=function(t,e){var r=this,n=t=Array.isArray(t)?t:[t],i=this._items.filter(function(t,e){return~n.indexOf(e)&&!t.busy}),s=this._config.classes;if(i.length){if(this._config.animation&&!e)return new Promise(function(s){var o=i.length;i.forEach(function(e){var t,n=!e.expanded,i=e.contentHeight+"px";e.expanded=n,e.busy=!0,n?(v(e.content,{display:"",maxHeight:0,paddingTop:0,paddingBottom:0}),f(e.content),v(e.content,{maxHeight:i,paddingTop:"",paddingBottom:""})):(v(e.content,{maxHeight:i}),f(e.content),v(e.content,{maxHeight:0,paddingTop:0,paddingBottom:0})),v(e.content,((t={})[g("transitionDuration")]=r._config.duration+"ms",t[g("transitionProperty")]="max-height,padding-top,padding-bottom",t)),function(e,n,i){var s=function(t){t.propertyName===n&&(i(),e.removeEventListener(_,s))};e.addEventListener(_,s)}(e.content,"max-height",function(){var t;v(e.content,((t={maxHeight:"",paddingTop:"",paddingBottom:""})[g("transitionDuration")]="",t[g("transitionProperty")]="",t)),n||(e.content.style.display="none",f(e.content)),1===o?s():--o<1&&s(),e.busy=!1,r.emit(n?b:E,d(e,["content","title","index"]))})})});i.forEach(function(t){var e=!t.expanded;t.expanded=e,s.titleActive&&t.title.classList[e?"add":"remove"](s.titleActive),s.contentActive&&t.content.classList[e?"add":"remove"](s.contentActive),t.content.style.display=e?"":"none",f(t.content),r.emit(e?b:E,d(t,["content","title","index"]))})}},A.prototype.collapse=function(t,e){var n=Array.isArray(t)?t:[t];return this.toggle(this._items.filter(function(t,e){return~n.indexOf(e)&&t.expanded}).map(function(t){return t.index}),e)},A.prototype.expand=function(t,e){var n=Array.isArray(t)?t:[t];return this.toggle(this._items.filter(function(t,e){return~n.indexOf(e)&&!t.expanded}).map(function(t){return t.index}),e)},A.prototype.refresh=function(t){var s=this,e=this.host.querySelectorAll(this._config.selectors.title),o=this.host.querySelectorAll(this._config.selectors.content),r=[],n=t?this._config.index:this._items.filter(function(t){return t.expanded}).map(function(t){return t.index}),a=0;if(h(e,function(t,e){var n=o[e];if(n){var i={index:a++,title:t,content:n,expanded:!0,busy:!1};s._config.animation&&(i.contentHeight=n.offsetHeight),r.push(i)}}),this._items=r,t){var i=r.filter(function(t){return!~n.indexOf(t.index)}).map(function(t){return t.index});return this.toggle(i,!0)}},A.prototype.destroy=function(){this._removeDelegate(),this.removeAllListeners(),this.host=this._items=this._config=null},A);function A(t,e){var i=r.call(this)||this;return i.host=t,i._items=[],i._config=A.config(e||{},!0),i.refresh(!0),i._removeDelegate=o.bind(i.host)(i._config.event,i._config.selectors.title,function(t){var e=i._items.map(function(t){return t.title}).indexOf(t),n=i._items[e];n&&!n.busy&&(i._config.accordion&&i.collapse(i._items.filter(function(t){return t!==n}).map(function(t){return t.index})),i.toggle(e))}),i}var C,w,P={content:"",animation:!0,duration:1e3,unsafe:!1,host:document.body};function N(t,e){return"object"!=typeof e&&(e={}),function(n){var i=document.createElement("div"),s=n.classes||{};return i[n.unsafe?"innerHTML":"innerText"]=n.content,s.host&&(i.className=s.host),n.host.appendChild(i),new Promise(function(t){function e(){setTimeout(function(){return t()},n.duration)}s.enter&&n.animation?(i.classList.add(s.enter),p(i,x,function(){i.classList.remove(s.enter),e()})):e()}).then(function(){if(s.leave&&n.animation)return new Promise(function(t){i.classList.add(s.leave),p(i,x,function(){i.classList.remove(s.leave),e(),t()})});function e(){n.host.removeChild(i),i=null}e()})}(u(P,"object"===c(t)?t:Object.assign({content:t},e)))}N.config=function(t){P=u(P,t),x||(P.animation=!1)},(w=C=C||{})[w.OPENED=0]="OPENED",w[w.CLOSED=1]="CLOSED",w[w.OPENING=2]="OPENING",w[w.CLOSING=3]="CLOSING";var T,D="open",z="close",S="cancel",M="confirm",k={host:document.body,title:"",content:"",animation:!0,event:"click",autoclose:!0,actions:[]},j=(e(H,T=n),H.config=function(t,e){var n=u(k,t);if(x||(n.animation=!1),e)return n;k=n},H.prototype.render=function(){var n,i=this,s=this.config,t=s.classes||{},e=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("article");if(t.host&&(e.className=t.host),t.backdrop&&(o.className=t.backdrop),t.body&&(r.className=t.body),s.title){var c=document.createElement("header");c.innerHTML=s.title,r.appendChild(c),this.el.header=c}s.autoclose&&(o.dataset.action=z),a.innerHTML=s.content,s.actions&&s.actions.length&&(n=document.createElement("footer"),s.actions.forEach(function(t){var e=document.createElement("a");e.innerHTML=t.label,t.class&&(e.className=t.class),t.type&&(e.dataset.action=t.type),t.href&&(e.href=t.href),t.target&&(e.target=t.target),t.callback&&e.addEventListener(s.event,t.callback.bind(i)),n.appendChild(e)})),r.appendChild(a),n&&(r.appendChild(n),this.el.footer=n),e.appendChild(o),e.appendChild(r),this.host=e,this.el.body=r,this.el.content=a},H.prototype.setOverflow=function(t){this.config.host.style.overflow=t?"hidden":""},H.prototype.open=function(){var e=this;return this.state===C.OPENING||this.state===C.OPENED?Promise.reject():(this.setOverflow(!0),this.config.classes.enter&&this.config.animation?new Promise(function(t){e.host.classList.add(e.config.classes.enter),p(e.host,x,function(){e.host.classList.remove(e.config.classes.enter),e.state=C.OPENED,e.emit(D),t(e)}),e.state=C.OPENING,e.config.host.appendChild(e.host)}):(this.config.host.appendChild(this.host),this.state=C.OPENED,this.emit(D),Promise.resolve()))},H.prototype.close=function(){var e=this;return this.state===C.CLOSING||this.state===C.CLOSED?Promise.reject():(this.setOverflow(),this.config.classes.leave&&this.config.animation?new Promise(function(t){p(e.host,x,function(){e.config.host.removeChild(e.host),e.host.classList.remove(e.config.classes.leave),e.state=C.CLOSED,e.emit(z),t(e)}),e.state=C.CLOSING,e.host.classList.add(e.config.classes.leave)}):(this.config.host.removeChild(this.host),this.state=C.CLOSED,this.emit(z),Promise.resolve()))},H.prototype.destroy=function(){this.removeAllListeners(),this.host=this.el=this.config=null},H);function H(t){var e=T.call(this)||this;return e.state=C.CLOSED,e.el={},e.config=H.config(t,!0),e.render(),o.bind(e.host)(e.config.event,"[data-action]",function(t){switch(t.dataset.action){case z:e.close();break;case S:e.emit(S),e.close();break;case M:e.emit(M),e.close()}}),e}var I,G="switch",q={selectors:{tab:"a",content:"article"},classes:{},event:"click",index:0},B=(e(X,I=n),X.config=function(t,e){var n=u(q,t);if(e)return n;q=n},X.prototype.switch=function(t){if(t!==this._current&&this._tabs[t]){var e=this._current,n=this._config.classes,i=this._tabs[e],s=this._contents[e],o=this._tabs[t],r=this._contents[t];n.active&&(i&&i.classList.remove(n.active),o.classList.add(n.active)),s&&(s.style.display="none"),r.style.display="",f(r),this._current=t,this.emit(G,{tab:o,content:r,current:t,previous:e})}},X.prototype.refresh=function(t){var i=this,e=this.host.querySelectorAll(this._config.selectors.tab),s=this.host.querySelectorAll(this._config.selectors.content);h(e,function(t,e){var n=s[e];n&&(n.style.display="none",i._tabs.push(t),i._contents.push(n))}),this.switch(t)},X.prototype.destroy=function(){this._removeDelegate(),this.removeAllListeners(),this.host=this._tabs=this._contents=this._config=null},X);function X(t,e){var n=I.call(this)||this;return n.host=t,n._tabs=[],n._contents=[],n._config=X.config(e||{},!0),n.refresh(n._config.index),n._removeDelegate=o.bind(n.host)(n._config.event,n._config.selectors.tab,function(t){var e=n._tabs.indexOf(t);~e&&n.switch(e)}),n}var U,Y=a({slide:"slide",slideChange:"slideChange"},y?{start:"touchstart",move:"touchmove",end:["touchend"]}:{start:"mousedown",move:"mousemove",end:["mouseup","mouseleave"]}),F={selectors:{item:"li"},delay:4e3,speed:500,continuous:!1,auto:!1,index:0,threshold:.4,resistance:.4,classes:{}},W=(e(Z,U=n),Z.config=function(t,e){var n=u(F,t);if(n.auto&&(n.continuous=!0),(n.threshold<0||1<n.threshold)&&(n.threshold=F.threshold),(n.resistance<0||1<n.resistance)&&(n.resistance=F.resistance),_||(n.speed=0),n.selectors.indicator&&n.classes.indicatorActive||(delete n.selectors.indicator,delete n.classes.indicatorActive),n.resistance=1-n.resistance,e)return n;F=n},Z.prototype.setup=function(){var t=this.host.querySelector(this.config.selectors.item).parentElement,n=[],i=t.offsetWidth;h(t.children,function(t,e){v(t,{width:i+"px",cssFloat:"left"}),n.push({el:t,index:e})}),v(t,{overflow:"hidden",width:i*n.length+"px"}),this.container=t,this.items=n,this.size=n.length,this.step=i,this.move(this.config.index,0)},Z.prototype.setupEvents=function(){function t(e){var t=Y[e];"string"==typeof t?i.map[t]=e:t.forEach(function(t){return i.map[t]=e})}var s=this,o={x:0,y:0},r={x:0,y:0},n=s.config.continuous&&2<s.size,i={map:{},handleEvent:function(t){if(!s.busy){var e=this[this.map[t.type]];e&&e(t)}},start:function(t){var e=y?t.touches[0]:t;o.x=e.pageX,o.y=e.pageY,s.config.auto&&s.stop.call(s),c.apply(void 0,[Y.move].concat(Y.end))},move:function(t){if(!(t.touches&&1<t.touches.length)){var e=y?t.touches[0]:t;if(r.x=e.pageX-o.x,r.y=e.pageY-o.y,Math.abs(r.x)>=Math.abs(r.y)){var n=s.step-1,i=r.x*s.config.resistance;n<i?i=n:i<-n&&(i=-n),s.translate(s.current*s.step-i,0)}}},end:function(){var t=s.step*s.config.threshold,e=Math.ceil(s.config.speed/s.step*Math.abs(r.x));h.apply(void 0,[Y.move].concat(Y.end)),r.x>t?n||0<s.current?s.prev().then(function(){s.config.auto&&s.start.call(s)}):s.translate(s.current*s.step,e):r.x<-t&&(n||s.current<s.size-1)?s.next().then(function(){s.config.auto&&s.start.call(s)}):s.translate(s.current*s.step,e)}},a={passive:!1};for(var e in Y)t(e);return c(Y.start),function(){h.apply(void 0,[Y.start,Y.move].concat(Y.end))};function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return s.container.addEventListener(t,i,a)})}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return s.container.removeEventListener(t,i,a)})}},Z.prototype.translate=function(t,e){var n,i="translateX("+~~-t+"px)",s=e+"ms";v(this.container,((n={})[g("transform")]=i,n[g("transitionDuration")]=s,n))},Z.prototype.move=function(n,t){var e=this;if(this.busy||n<0||n>this.size-1)return Promise.resolve(!1);var i,s=this.current===n&&0===n?0:this.items[this.current].index,o=this.config.continuous&&2<this.size,r=this.config.classes;this.busy=!0,r.active&&this.items[this.current].el.classList.remove(r.active),i=o?0===n?(this.items.unshift(this.items.pop()),1):n===this.size-1?(this.items.push(this.items.shift()),this.size-2):n:n;var a=this.items[i].index;return this.indicators&&(this.indicators[s]&&this.indicators[s].classList.remove(this.config.classes.indicatorActive),this.indicators[a]&&this.indicators[a].classList.add(this.config.classes.indicatorActive)),setTimeout(function(){e.emit(Y.slide,s,a)},0),this.translate(n*this.step,t),0<t?new Promise(function(t){p(e.container,_,function(){c.call(e,function(){t(!0)})})}):c.call(this);function c(t){var e=this;r.active&&this.items[i].el.classList.add(r.active),o&&(0===n?(this.container.insertBefore(this.container.children[this.size-1],this.container.children[0]),this.translate(this.step,0)):n===this.size-1&&(this.container.appendChild(this.container.children[0]),this.translate(this.step*(n-1),0))),this.current=i,this.busy=!1,setTimeout(function(){e.emit(Y.slideChange,e.items[i].index,s),t&&t()},0)}},Z.prototype.slide=function(t){if(t<0||t>this.size-1||this.busy)return Promise.resolve(!1);for(var e=0;e<this.size;){if(this.items[e].index===t)return this.move(e,this.config.speed);e++}},Z.prototype.next=function(){return this.move(this.size<3&&this.current===this.size-1?0:this.current+1,this.config.speed)},Z.prototype.prev=function(){return this.move(this.size<3&&0===this.current?this.size-1:this.current-1,this.config.speed)},Z.prototype.start=function(){var t=this;if(!(this.running||this.size<3)){this.stop(),this.running=!0;var e=function(){t.running&&(t.instance=setTimeout(function(){t.next().then(e)},t.config.delay))};e()}},Z.prototype.stop=function(){clearInterval(this.instance),this.instance=null,this.running=!1},Z.prototype.destroy=function(){this.offEvents(),this.removeAllListeners(),this.stop(),this.host=this.items=this.container=null},Z);function Z(t,e){void 0===e&&(e={});var n=U.call(this)||this;if(n.items=[],n.current=0,n.config=Z.config(e,!0),n.host=t,n.config.selectors.indicator){var i=document.querySelectorAll(n.config.selectors.indicator);i&&(n.indicators=i)}return n.setup(),n.offEvents=n.setupEvents(),n.config.auto&&n.start(),n}t.Carousel=W,t.Collapsible=O,t.Modal=j,t.Tab=B,t.toast=N,Object.defineProperty(t,"__esModule",{value:!0})});
