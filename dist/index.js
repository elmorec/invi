!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Invi={})}(this,function(t){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function e(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var c=function(){return(c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase();return e.match(/element$/)?"element":e}function h(t,e){return Array.prototype.forEach.call(t,e)}function l(t,e){var n=c({},t);if("object"!==a(e))return n;for(var i in e){var o=t[i],s=e[i],r=a(o);null!=o?r===a(s)&&(n[i]="object"===r?l(o,s):s):n[i]=s}return n}function u(t){return t.charAt(0).toUpperCase()+t.substring(1)}var n=function(){function t(){this.events={}}return t.prototype.on=function(t,e){(this.events[t]||(this.events[t]=[])).push(e)},t.prototype.off=function(t,e){this.events[t]&&this.events[t].splice(this.events[t].indexOf(e)>>>0,1)},t.prototype.removeAllListeners=function(){this.events={}},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];(this.events[t]||[]).slice().map(function(t){t.apply(void 0,e)})},t}();function s(t,e,n){void 0===n&&(n=document.body);for(var i,o,s,r=[],c=(i=n.querySelectorAll(e),o=function(t){return t},Array.prototype.map.call(i,o));t&&!~c.indexOf(t);)t=t!==n&&!(null!=(s=t)&&s.nodeType==s.DOCUMENT_NODE)&&t.parentNode;return t&&r.indexOf(t)<0&&r.push(t),r}function r(t,n,i){var o=this;o.addEventListener(t,function(t){var e=s(t.target,n,o)[0];e&&i(e,t)})}function f(t,e,n,i){void 0===i&&(i={passive:!0});var o=function(){n(),t.removeEventListener(e,o,i)};t.addEventListener(e,o,i)}function d(t,e){for(var n in e)t.style[n]=e[n]}var p={};function v(t,e){if(t in document.body.style)return t;if(p[t])return p[t][e?1:0];for(var n,i=u(t),o=["webkit","Moz","O","ms"],s=0;s<o.length;s++){var r=o[s]+i;if(r in document.body.style)return p[t]=[r,(n=u(r),n.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}))],p[t][e?1:0]}}var o,m,y="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,g=function(){var t={animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend"};for(var e in t)if(e in document.body.style)return t[e]}(),b=function(){var t={transition:"transitionend",webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionEnd"};for(var e in t)if(e in document.body.style)return t[e]}(),x="expand",E="collapse",O={selectors:{title:"header",content:"article"},classes:{},event:"click",indexes:[-1],accordion:!1,animation:!0},L=function(i){function o(t,e){void 0===e&&(e={});var n=i.call(this)||this;return n.items=[],n.config=o.config(e,!0),n.host=t,n.refresh(!0),r.bind(t)(n.config.event,n.config.selectors.title,function(t){n.toggle(n.items.map(function(t){return t.title}).indexOf(t))}),n}return e(o,i),o.config=function(t,e){var n=l(O,t);if(b||(n.animation=!1),e)return n;O=n},o.prototype.toggle=function(t){var e=this.items[t];return e?this[e.active?"collapse":"expand"](t):Promise.reject()},o.prototype.collapse=function(t,e){var n=this,i=this.items[t],o=this.config.classes;return i?!i.active||i.busy?Promise.resolve({title:i.title,content:i.content,index:t}):(i.active=!1,o.active&&[i.title,i.content].forEach(function(t){return t.classList.remove(o.active)}),e?void(i.content.style.display="none"):(i.busy=!0,new Promise(function(t){n.config.animation?(i.content.style.maxHeight=i.contentHeight+"px",setTimeout(function(){i.content.style.maxHeight=i.content.style.paddingTop=i.content.style.paddingBottom="0"},24),f(i.content,b,function(){i.content.style.display="none",i.content.style.maxHeight=i.content.style.paddingTop=i.content.style.paddingBottom="",setTimeout(t,24)})):(i.content.style.display="none",t())}).then(function(){return i.busy=!1,n.emit(E,i.content,t),{title:i.title,content:i.content,index:t}}))):Promise.reject()},o.prototype.expand=function(n,t){var i=this,e=this.items[n],o=this.config.classes;return e?e.active||e.busy?Promise.resolve({title:e.title,content:e.content,index:n}):(e.active=!0,o.active&&[e.title,e.content].forEach(function(t){return t.classList.add(o.active)}),t?(e.content.style.display="",void(this.config.accordion&&this.items.forEach(function(t,e){return n!==e&&i.collapse(e,!0)}))):(e.busy=!0,Promise.all([new Promise(function(t){i.config.animation?(e.content.style.maxHeight=e.content.style.paddingTop=e.content.style.paddingBottom="0",e.content.style.display="",setTimeout(function(){e.content.style.maxHeight=e.contentHeight+"px",e.content.style.paddingTop=e.content.style.paddingBottom=""},24),f(e.content,b,function(){e.content.style.maxHeight=e.content.style.paddingTop=e.content.style.paddingBottom="",setTimeout(t,24)})):(e.content.style.display="",t())}).then(function(){e.busy=!1,i.emit(x,e.content,n)})].concat(this.config.accordion?this.items.map(function(t,e){return n!==e?i.collapse(e):void 0}):void 0)).then(function(){return{title:e.title,content:e.content,index:n}}))):Promise.reject()},o.prototype.refresh=function(t){var o=this,e=this.host.querySelectorAll(this.config.selectors.title),s=this.host.querySelectorAll(this.config.selectors.content),r=[];h(e,function(t,e){var n=s[e];if(n){var i={title:t,content:n,active:!0,busy:!1};o.config.animation&&(i.contentHeight=n.offsetHeight),r.push(i)}}),this.items=r,t&&r.map(function(t,e){return o[~o.config.indexes.indexOf(e)?"expand":"collapse"](e,!0)})},o.prototype.destroy=function(){this.removeAllListeners(),this.host=this.items=this.config=null},o}(n),P={content:"",animation:!0,duration:1e3,unsafe:!1,host:document.body},w=function(t){return void 0===t&&(t={}),n=l(P,"object"===a(t)?t:{content:String(t)}),i=document.createElement("div"),o=n.classes||{},i[n.unsafe?"innerHTML":"innerText"]=n.content,o.host&&(i.className=o.host),n.host.appendChild(i),new Promise(function(t){function e(){setTimeout(function(){return t()},n.duration)}o.enter&&n.animation?(i.classList.add(o.enter),f(i,g,function(){i.classList.remove(o.enter),e()})):e()}).then(function(){if(o.leave&&n.animation)return new Promise(function(t){i.classList.add(o.leave),f(i,g,function(){i.classList.remove(o.leave),e(),t()})});function e(){n.host.removeChild(i),i=null}e()});var n,i,o};w.config=function(t){P=l(P,t),g||(P.animation=!1)},(m=o||(o={}))[m.OPENED=0]="OPENED",m[m.CLOSED=1]="CLOSED",m[m.OPENING=2]="OPENING",m[m.CLOSING=3]="CLOSING";var C="open",T="close",N="cancel",z="confirm",A={host:document.body,title:"",content:"",animation:!0,event:"click",autoclose:!0,actions:[]},S=function(n){function i(t){var e=n.call(this)||this;return e.state=o.CLOSED,e.el={},e.config=i.config(t,!0),e.render(),r.bind(e.host)(e.config.event,"[data-action]",function(t){switch(t.dataset.action){case T:e.close();break;case N:e.emit(N),e.close();break;case z:e.emit(z),e.close()}}),e}return e(i,n),i.config=function(t,e){var n=l(A,t);if(g||(n.animation=!1),e)return n;A=n},i.prototype.render=function(){var n,i=this,o=this.config,t=o.classes||{},e=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div"),c=document.createElement("article");if(t.host&&(e.className=t.host),t.backdrop&&(s.className=t.backdrop),t.body&&(r.className=t.body),o.title){var a=document.createElement("header");a.innerHTML=o.title,r.appendChild(a),this.el.header=a}o.autoclose&&(s.dataset.action=T),c.innerHTML=o.content,o.actions&&o.actions.length&&(n=document.createElement("footer"),o.actions.forEach(function(t){var e=document.createElement("a");e.innerHTML=t.label,t.class&&(e.className=t.class),t.type&&(e.dataset.action=t.type),t.redirect&&(e.href=t.redirect),t.target&&(e.target=t.target),t.callback&&e.addEventListener(o.event,t.callback.bind(i)),n.appendChild(e)})),r.appendChild(c),n&&(r.appendChild(n),this.el.footer=n),e.appendChild(s),e.appendChild(r),this.host=e,this.el.body=r,this.el.content=c},i.prototype.setOverflow=function(t){this.config.host.style.overflow=t?"hidden":""},i.prototype.open=function(){var e=this;return this.state===o.OPENING||this.state===o.OPENED?Promise.reject():(this.setOverflow(!0),this.config.classes.enter&&this.config.animation?new Promise(function(t){e.host.classList.add(e.config.classes.enter),f(e.host,g,function(){e.host.classList.remove(e.config.classes.enter),e.state=o.OPENED,e.emit(C),t(e)}),e.state=o.OPENING,e.config.host.appendChild(e.host)}):(this.config.host.appendChild(this.host),this.state=o.OPENED,this.emit(C),Promise.resolve()))},i.prototype.close=function(){var e=this;return this.state===o.CLOSING||this.state===o.CLOSED?Promise.reject():(this.setOverflow(),this.config.classes.leave&&this.config.animation?new Promise(function(t){f(e.host,g,function(){e.config.host.removeChild(e.host),e.host.classList.remove(e.config.classes.leave),e.state=o.CLOSED,e.emit(T),t(e)}),e.state=o.CLOSING,e.host.classList.add(e.config.classes.leave)}):(this.config.host.removeChild(this.host),this.state=o.CLOSED,this.emit(T),Promise.resolve()))},i.prototype.destroy=function(){this.removeAllListeners(),this.host=this.el=this.config=null},i}(n),D="switch",j={selectors:{tab:"a",content:"article"},classes:{},event:"click",index:0},M=function(i){function o(t,e){void 0===e&&(e={});var n=i.call(this)||this;return n.current=0,n.tabs=[],n.contents=[],n.config=o.config(e,!0),n.host=t,n.config.index&&(n.current=n.config.index),n.refresh(),r.bind(t)(n.config.event,n.config.selectors.tab,function(t){var e=n.tabs.indexOf(t);~e&&n.switch(e)}),n}return e(o,i),o.config=function(t,e){var n=l(j,t);if(e)return n;j=n},o.prototype.switch=function(e,t){var n=this;if((e!==this.current||t)&&this.tabs[e]){var i=this.current,o=this.config.classes,s=this.tabs[i],r=this.contents[i],c=this.tabs[e],a=this.contents[e];if(o.active&&([s,r].forEach(function(t){return t.classList.remove(o.active)}),[c,a].forEach(function(t){return t.classList.add(o.active)})),r.style.display="none",a.style.display="",this.current=e,!t)return new Promise(function(t){setTimeout(function(){n.emit(D,c,a,e,i),t({tab:c,content:a,current:e,previous:i})},0)})}},o.prototype.refresh=function(){var i=this,t=this.host.querySelectorAll(this.config.selectors.tab),o=this.host.querySelectorAll(this.config.selectors.content);h(t,function(t,e){var n=o[e];n&&(n.style.display="none",i.tabs.push(t),i.contents.push(n))}),this.switch(this.current,!0)},o.prototype.destroy=function(){this.removeAllListeners(),this.host=this.tabs=this.contents=this.config=null},o}(n),k=c({slide:"slide",slideChange:"slideChange"},y?{start:"touchstart",move:"touchmove",end:["touchend"]}:{start:"mousedown",move:"mousemove",end:["mouseup","mouseleave"]}),H={selectors:{item:"li"},delay:4e3,speed:500,continuous:!1,auto:!1,index:0,threshold:.4,resistance:.4,classes:{}},_=function(i){function o(t,e){void 0===e&&(e={});var n=i.call(this)||this;return n.items=[],n.current=0,n.config=o.config(e,!0),n.host=t,n.setup(),n.offEvents=n.setupEvents(),n.config.auto&&n.start(),n}return e(o,i),o.config=function(t,e){var n=l(H,t);if(n.auto&&(n.continuous=!0),(n.threshold<0||1<n.threshold)&&(n.threshold=H.threshold),(n.resistance<0||1<n.resistance)&&(n.resistance=H.resistance),b||(n.speed=0),n.resistance=1-n.resistance,e)return n;H=n},o.prototype.setup=function(){var t=this.host.querySelector(this.config.selectors.item).parentElement,n=[],i=t.offsetWidth;h(t.children,function(t,e){d(t,{width:i+"px",cssFloat:"left"}),n.push({el:t,index:e})}),d(t,{overflow:"hidden",width:i*n.length+"px"}),this.container=t,this.items=n,this.size=n.length,this.step=i,this.move(this.config.index,0)},o.prototype.setupEvents=function(){var o=this,s={x:0,y:0},r={x:0,y:0},i=o.config.continuous&&2<o.size,n={map:{},handleEvent:function(t){if(!o.busy){var e=this[this.map[t.type]];e&&e(t)}},start:function(t){var e=y?t.touches[0]:t;s.x=e.pageX,s.y=e.pageY,o.config.auto&&o.stop.call(o),a.apply(void 0,[k.move].concat(k.end))},move:function(t){if(!(t.touches&&1<t.touches.length)){var e=y?t.touches[0]:t;if(r.x=e.pageX-s.x,r.y=e.pageY-s.y,Math.abs(r.x)>=Math.abs(r.y)){var n=o.step-1,i=r.x*o.config.resistance;n<i?i=n:i<-n&&(i=-n),t.preventDefault(),o.translate(o.current*o.step-i,0)}}},end:function(t){var e=o.step*o.config.threshold,n=Math.ceil(o.config.speed/o.step*Math.abs(r.x));h.apply(void 0,[k.move].concat(k.end)),t.preventDefault(),r.x>e?i||0<o.current?o.prev().then(function(){o.config.auto&&o.start.call(o)}):o.translate(o.current*o.step,n):r.x<-e&&(i||o.current<o.size-1)?o.next().then(function(){o.config.auto&&o.start.call(o)}):o.translate(o.current*o.step,n)}},c={passive:!1},t=function(e){var t=k[e];"string"==typeof t?n.map[t]=e:t.forEach(function(t){return n.map[t]=e})};for(var e in k)t(e);return a(k.start),function(){h.apply(void 0,[k.start,k.move].concat(k.end))};function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return o.container.addEventListener(t,n,c)})}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return o.container.removeEventListener(t,n,c)})}},o.prototype.translate=function(t,e){var n,i="translateX("+~~-t+"px)",o=e+"ms";d(this.container,((n={})[v("transform")]=i,n[v("transitionDuration")]=o,n))},o.prototype.move=function(n,t){var e=this;if(this.busy||n<0||n>this.size-1)return Promise.resolve(!1);var i,o=this.current===n&&0===n?0:this.items[this.current].index,s=this.config.continuous&&2<this.size,r=this.config.classes;return this.busy=!0,r.active&&this.items[this.current].el.classList.remove(r.active),i=s?0===n?(this.items.unshift(this.items.pop()),1):n===this.size-1?(this.items.push(this.items.shift()),this.size-2):n:n,setTimeout(function(){e.emit(k.slide,o,e.items[i].index)},0),this.translate(n*this.step,t),0<t?new Promise(function(t){f(e.container,b,function(){c.call(e,function(){t(!0)})})}):c.call(this);function c(t){var e=this;r.active&&this.items[i].el.classList.add(r.active),s&&(0===n?(this.container.insertBefore(this.container.children[this.size-1],this.container.children[0]),this.translate(this.step,0)):n===this.size-1&&(this.container.appendChild(this.container.children[0]),this.translate(this.step*(n-1),0))),this.current=i,this.busy=!1,setTimeout(function(){e.emit(k.slideChange,e.items[i].index,o),t&&t()},0)}},o.prototype.slide=function(t){if(t<0||t>this.size-1||this.busy)return Promise.resolve(!1);for(var e=0;e<this.size;){if(this.items[e].index===t)return this.move(e,this.config.speed);e++}},o.prototype.next=function(){return this.move(this.size<3&&this.current===this.size-1?0:this.current+1,this.config.speed)},o.prototype.prev=function(){return this.move(this.size<3&&0===this.current?this.size-1:this.current-1,this.config.speed)},o.prototype.start=function(){var t=this;if(!(this.running||this.size<3)){this.stop(),this.running=!0;var e=function(){t.running&&(t.instance=setTimeout(function(){t.next().then(e)},t.config.delay))};e()}},o.prototype.stop=function(){clearInterval(this.instance),this.instance=null,this.running=!1},o.prototype.destroy=function(){this.offEvents(),this.removeAllListeners(),this.stop(),this.host=this.items=this.container=null},o}(n);t.Collapsible=L,t.toast=w,t.Modal=S,t.Tab=M,t.Carousel=_,Object.defineProperty(t,"__esModule",{value:!0})});
