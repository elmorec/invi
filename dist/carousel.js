!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Invi={})}(this,function(t){"use strict";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var c=function(){return(c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function u(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase();return e.match(/element$/)?"element":e}function a(t){return t.charAt(0).toUpperCase()+t.substring(1)}var e=function(){function t(){this.events={}}return t.prototype.on=function(t,e){(this.events[t]||(this.events[t]=[])).push(e)},t.prototype.off=function(t,e){this.events[t]&&this.events[t].splice(this.events[t].indexOf(e)>>>0,1)},t.prototype.removeAllListeners=function(){this.events={}},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];(this.events[t]||[]).slice().map(function(t){t.apply(void 0,e)})},t}();function r(t,e){for(var n in e)t.style[n]=e[n]}var h={};function f(t,e){if(t in document.body.style)return t;if(h[t])return h[t][e?1:0];for(var n,i=a(t),s=["webkit","Moz","O","ms"],o=0;o<s.length;o++){var r=s[o]+i;if(r in document.body.style)return h[t]=[r,(n=a(r),n.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}))],h[t][e?1:0]}}var p="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,l=function(){var t={transition:"transitionend",webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionEnd"};for(var e in t)if(e in document.body.style)return t[e]}(),v=c({slide:"slide",slideChange:"slideChange"},p?{start:"touchstart",move:"touchmove",end:["touchend"]}:{start:"mousedown",move:"mousemove",end:["mouseup","mouseleave"]}),d={selectors:{item:"li"},delay:4e3,speed:500,continuous:!1,auto:!1,index:0,threshold:.4,resistance:.4,classes:{}},n=function(i){function s(t,e){void 0===e&&(e={});var n=i.call(this)||this;return n.items=[],n.current=0,n.config=s.config(e,!0),n.host=t,n.setup(),n.offEvents=n.setupEvents(),n.config.auto&&n.start(),n}return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(s,i),s.config=function(t,e){var n=function t(e,n){var i=c({},e);if("object"!==u(n))return i;for(var s in n){var o=e[s],r=n[s],a=u(o);null!=o?a===u(r)&&(i[s]="object"===a?t(o,r):r):i[s]=r}return i}(d,t);if(n.auto&&(n.continuous=!0),(n.threshold<0||1<n.threshold)&&(n.threshold=d.threshold),(n.resistance<0||1<n.resistance)&&(n.resistance=d.resistance),l||(n.speed=0),n.resistance=1-n.resistance,e)return n;d=n},s.prototype.setup=function(){var t,e,n=this.host.querySelector(this.config.selectors.item).parentElement,i=[],s=n.offsetWidth;t=n.children,e=function(t,e){r(t,{width:s+"px",cssFloat:"left"}),i.push({el:t,index:e})},Array.prototype.forEach.call(t,e),r(n,{overflow:"hidden",width:s*i.length+"px"}),this.container=n,this.items=i,this.size=i.length,this.step=s,this.move(this.config.index,0)},s.prototype.setupEvents=function(){var s=this,o={x:0,y:0},r={x:0,y:0},i=s.config.continuous&&2<s.size,n={map:{},handleEvent:function(t){if(!s.busy){var e=this[this.map[t.type]];e&&e(t)}},start:function(t){var e=p?t.touches[0]:t;o.x=e.pageX,o.y=e.pageY,s.config.auto&&s.stop.call(s),c.apply(void 0,[v.move].concat(v.end))},move:function(t){if(!(t.touches&&1<t.touches.length)){var e=p?t.touches[0]:t;if(r.x=e.pageX-o.x,r.y=e.pageY-o.y,Math.abs(r.x)>=Math.abs(r.y)){var n=s.step-1,i=r.x*s.config.resistance;n<i?i=n:i<-n&&(i=-n),t.preventDefault(),s.translate(s.current*s.step-i,0)}}},end:function(t){var e=s.step*s.config.threshold,n=Math.ceil(s.config.speed/s.step*Math.abs(r.x));u.apply(void 0,[v.move].concat(v.end)),t.preventDefault(),r.x>e?i||0<s.current?s.prev().then(function(){s.config.auto&&s.start.call(s)}):s.translate(s.current*s.step,n):r.x<-e&&(i||s.current<s.size-1)?s.next().then(function(){s.config.auto&&s.start.call(s)}):s.translate(s.current*s.step,n)}},a={passive:!1},t=function(e){var t=v[e];"string"==typeof t?n.map[t]=e:t.forEach(function(t){return n.map[t]=e})};for(var e in v)t(e);return c(v.start),function(){u.apply(void 0,[v.start,v.move].concat(v.end))};function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return s.container.addEventListener(t,n,a)})}function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return s.container.removeEventListener(t,n,a)})}},s.prototype.translate=function(t,e){var n,i="translateX("+~~-t+"px)",s=e+"ms";r(this.container,((n={})[f("transform")]=i,n[f("transitionDuration")]=s,n))},s.prototype.move=function(n,t){var e=this;if(this.busy||n<0||n>this.size-1)return Promise.resolve(!1);var i,s=this.current===n&&0===n?0:this.items[this.current].index,o=this.config.continuous&&2<this.size,r=this.config.classes;return this.busy=!0,r.active&&this.items[this.current].el.classList.remove(r.active),i=o?0===n?(this.items.unshift(this.items.pop()),1):n===this.size-1?(this.items.push(this.items.shift()),this.size-2):n:n,setTimeout(function(){e.emit(v.slide,s,e.items[i].index)},0),this.translate(n*this.step,t),0<t?new Promise(function(t){!function(t,e,n,i){void 0===i&&(i={passive:!0});var s=function(){n(),t.removeEventListener(e,s,i)};t.addEventListener(e,s,i)}(e.container,l,function(){a.call(e,function(){t(!0)})})}):a.call(this);function a(t){var e=this;r.active&&this.items[i].el.classList.add(r.active),o&&(0===n?(this.container.insertBefore(this.container.children[this.size-1],this.container.children[0]),this.translate(this.step,0)):n===this.size-1&&(this.container.appendChild(this.container.children[0]),this.translate(this.step*(n-1),0))),this.current=i,this.busy=!1,setTimeout(function(){e.emit(v.slideChange,e.items[i].index,s),t&&t()},0)}},s.prototype.slide=function(t){if(t<0||t>this.size-1||this.busy)return Promise.resolve(!1);for(var e=0;e<this.size;){if(this.items[e].index===t)return this.move(e,this.config.speed);e++}},s.prototype.next=function(){return this.move(this.size<3&&this.current===this.size-1?0:this.current+1,this.config.speed)},s.prototype.prev=function(){return this.move(this.size<3&&0===this.current?this.size-1:this.current-1,this.config.speed)},s.prototype.start=function(){var t=this;if(!(this.running||this.size<3)){this.stop(),this.running=!0;var e=function(){t.running&&(t.instance=setTimeout(function(){t.next().then(e)},t.config.delay))};e()}},s.prototype.stop=function(){clearInterval(this.instance),this.instance=null,this.running=!1},s.prototype.destroy=function(){this.offEvents(),this.removeAllListeners(),this.stop(),this.host=this.items=this.container=null},s}(e);t.Carousel=n,Object.defineProperty(t,"__esModule",{value:!0})});
